---
import Link from "@/components/Link.astro";
import MainLayout from "@/layouts/main.layout.astro";
import { getOrderCollection } from "@/utils/collection";
import { Icon } from "astro-icon";
import { getCollection } from "astro:content";
import dayjs from "dayjs";
const notes = await getCollection("notes");
const orderNotes = getOrderCollection<"notes">(notes);
const pageTitle = "Codercoin's notes";
---

<MainLayout pageTitle={pageTitle}>
  <ul class="space-y-4 p-4 text-lg">
    {
      orderNotes.map(({ data, slug }) => (
        <li class="flex items-center gap-4 group">
          <Icon
            name="tabler:writing"
            size="18px"
            class="text-sm group-hover:animate-pulse group-hover:scale-150 group-hover:text-purple-500"
          />
          <div class="space-x-1">
            {data.tags.map((tag) => (
              <span class="text-xs border border-slate-500 px-2 rounded opacity-50">
                {tag}
              </span>
            ))}
          </div>
          <Link href={"/notes/" + slug}>{data.title}</Link>
          <span class="opacity-50">
            {dayjs(data.pubDateTime).format("YYYY-MM-DD")}
          </span>
        </li>
      ))
    }
  </ul>
</MainLayout>
