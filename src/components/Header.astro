---
import logo from '@/assets/images/avatar.png'
import ToggleTheme from './ToggleTheme'
import SearchButton from './SearchButton.tsx'
const menu = [
  {
    title: 'Note',
    url: '/notes',
  },
  {
    title: 'Handwriting',
    url: '/handwritings',
  },
]
const pathname = new URL(Astro.request.url).pathname
import { getCollection } from 'astro:content'
import type { SearchItem } from './SearchPanel'
const notes = await getCollection('notes')
const handwritings = await getCollection('handwritings')
const searchContentList: SearchItem[] = [...notes, ...handwritings].map(
  ({ data, collection, slug }) => ({
    title: data.title,
    description: data.description,
    collection,
    slug,
    data,
  })
)
---

<header class="w-full">
  <div
    class="container mx-auto max-w-4xl flex items-center justify-between p-4 border-b dark:border-slate-500 h-16"
  >
    <a href="/">
      <div class="flex items-center gap-2">
        <img src={logo.src} width="40" class="rounded-full" />
        <span class="text-lg font-extrabold hover:text-pink-500">Codercoin's</span>
        <span class="px-1 bg-pink-500 dark:text-black rounded text-white text-sm hover:-rotate-12"
          >Book</span
        >
      </div>
    </a>
    <div class="flex items-center gap-8">
      <SearchButton searchContentList={searchContentList} client:only />
      <nav class="flex gap-8">
        {
          menu.map((item) => (
            <a
              href={item.url}
              class={`border-b-2 border-transparent border-dashed hover:border-pink-500 hover:text-pink-500 ${
                pathname === item.url ? 'border-pink-500' : undefined
              }`}
            >
              {item.title}
            </a>
          ))
        }
      </nav>
      <ToggleTheme client:only />
    </div>
  </div>
</header>
